<!DOCTYPE html>
<html lang="es">
  <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Numa - Joyería de Alta Gama</title>
    <link rel="stylesheet" href="../css/hojaestilos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h2>
            Plaza Puerta del Sol,12001.
            Castellon de la PLana
            TLF:96498397
        </h2>
        <a href="../index.html">
            <img class="logo" src="https://imgur.com/XOfzZEv.png" alt="Logo de la marca">
            </a>
     <p>Elegancia y exclusividad en cada anillo</p>
    </header>
     <nav>
        <ul>
            <li><a href="../secciones/nosotros.html">Nosotros</a></li>
            <li><a href="../secciones/productos.html">Productos</a></li>
            <li><a href="../secciones/modelos.html">Modelos</a></li>
            <li><a href="../secciones/compra.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
        </ul>
    </nav>
    <div class="parallax3">
        <main class="checkout-page">
            <section class="checkout-container">
                <h1 class="checkout-title">Tu Carrito</h1>
    
                <div class="checkout-section">
                    <h2>Productos Seleccionados</h2>
                    <div id="carrito-contenido"></div>
                </div>
                
    
                <div class="checkout-section total">
                    <span class="total-label">Total</span>
                    <span class="total-amount"></span>
                </div>
    
                <button class="checkout-button">Proceder al Pago</button>
            </section>
        </main>
    </div>
    <footer>
        <p>&copy; 2025 Numa Joyería. Todos los derechos reservados.</p>
        <p>Plaza Puerta del Sol, 12001.
            Castellón de la Plana
            TLF: 96498397
        </p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const totalSpan = document.querySelector('.total-amount');
        
            function calcularTotal() {
                let total = 0;
                const inputs = document.querySelectorAll('.quantity-input');
                inputs.forEach(input => {
                    const cantidad = parseInt(input.value) || 0;
                    const precioTexto = input.closest('.product-info').querySelector('p').textContent;
                    const precioUnitario = parseFloat(precioTexto.replace(/[^\d,.-]/g, '').replace('.', '').replace(',', '.'));
                    total += cantidad * precioUnitario;
                });
                totalSpan.textContent = total.toLocaleString('es-ES', { style: 'currency', currency: 'EUR' });
            }
        
            function eliminarProducto(boton) {
                const productBox = boton.closest('.product-box');
                productBox.remove();
                calcularTotal();
            }
        
            // Escuchar cambios en las cantidades
            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('input', calcularTotal);
            });
        
            // Escuchar clics en los botones de eliminar
            document.querySelectorAll('.delete-button').forEach(button => {
                button.addEventListener('click', function () {
                    eliminarProducto(this);
                });
            });
        
            // Calcular total al cargar la página
            calcularTotal();
        });


document.addEventListener('DOMContentLoaded', function () {
    const contenedor = document.getElementById('carrito-contenido');
    const totalSpan = document.querySelector('.total-amount');

    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

    function renderCarrito() {
        contenedor.innerHTML = '';
        let total = 0;

        carrito.forEach((producto, index) => {
            const subtotal = producto.precio * producto.cantidad;
            total += subtotal;

            const div = document.createElement('div');
            div.classList.add('product-box');
            div.innerHTML = `
                <img src="${producto.imagen}" alt="${producto.nombre}" class="product-img">
                <div class="product-info">
                    <h3>${producto.nombre}</h3>
                    <label>Cantidad:</label>
                    <input type="number" class="quantity-input" value="${producto.cantidad}" min="1" data-index="${index}">
                    <p>Precio: ${producto.precio.toLocaleString('es-ES')} €</p>
                    <button class="delete-button" data-index="${index}">Eliminar</button>
                </div>
            `;
            contenedor.appendChild(div);
        });

        totalSpan.textContent = total.toLocaleString('es-ES', { style: 'currency', currency: 'EUR' });

        // Eventos de cantidad
        document.querySelectorAll('.quantity-input').forEach(input => {
            input.addEventListener('input', (e) => {
                const i = e.target.dataset.index;
                carrito[i].cantidad = parseInt(e.target.value);
                localStorage.setItem('carrito', JSON.stringify(carrito));
                renderCarrito();
            });
        });

        // Eventos de eliminar
        document.querySelectorAll('.delete-button').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const i = e.target.dataset.index;
                carrito.splice(i, 1);
                localStorage.setItem('carrito', JSON.stringify(carrito));
                renderCarrito();
            });
        });
    }

    renderCarrito();
});

    </script>
</body>
</html>